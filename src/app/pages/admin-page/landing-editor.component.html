
<div class="flex flex-col md:flex-row gap-8">
  <div class="w-full">
    <div class="card flex flex-col gap-6 bg-white rounded-xl shadow-md p-6">
      <div class="w-full overflow-x-auto">
  <p-stepper [value]="step" (valueChange)="step = $event ?? 1" orientation="vertical" class="mb-4 min-w-[180px] md:min-w-0">
          <p-step-list>
            <p-step [value]="1">Datos Generales</p-step>
            <p-step [value]="2">Historia y Filosof√≠a</p-step>
            <p-step [value]="3">Informaci√≥n de Contacto</p-step>
            <p-step [value]="4">Redes Sociales</p-step>
            <p-step [value]="5">Vista Previa</p-step>
          </p-step-list>
        </p-stepper>
      </div>

      <form [formGroup]="landingForm" class="flex flex-col gap-6">
        <ng-container [ngSwitch]="step">
        <!-- Paso 1: Datos Generales -->
  <div *ngSwitchCase="1" class="flex flex-col gap-4">
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="logo">Logo del negocio</label>
            <p-fileUpload mode="basic" name="logo" accept="image/*" maxFileSize="1000000" (onSelect)="onFileSelect($event)"></p-fileUpload>
            <ng-container *ngIf="getLogoPreview()">
              <div class="flex items-center mt-2 mb-1">
                <img
                  [src]="getLogoPreview()"
                  alt="Logo preview"
                  class="rounded shadow border border-gray-200"
                  style="max-width:100px; max-height:32px; width:auto; height:auto; object-fit:contain; display:block;"
                />
              </div>
            </ng-container>
            <p-message *ngIf="landingForm.get('logo')?.invalid && landingForm.get('logo')?.touched" severity="error" variant="text" size="small">El logo es requerido</p-message>
          </div>
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="businessName">Nombre del negocio</label>
            <input pInputText id="businessName" formControlName="businessName" placeholder="Escribe el nombre del negocio" class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900" maxlength="50"/>
            <p-message *ngIf="landingForm.get('businessName')?.invalid && landingForm.get('businessName')?.touched" severity="error" variant="text" size="small">El nombre es requerido</p-message>
          </div>

          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="slogan">Eslogan o breve descripci√≥n</label>
            <textarea pTextarea id="slogan" formControlName="slogan" rows="2" placeholder="Escribe tu eslogan" maxlength="100"
                      class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900"></textarea>
            <p-message *ngIf="landingForm.get('slogan')?.invalid && landingForm.get('slogan')?.touched" severity="error" variant="text" size="small">El eslogan es requerido</p-message>
          </div>
        </div>

        <!-- Paso 2: Historia y Filosof√≠a -->
        <div *ngSwitchCase="2" class="flex flex-col gap-4">
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="history">Historia</label>
            <textarea pTextarea id="history" formControlName="history" rows="4" maxlength="500"
                     placeholder="‚ú® Cu√©ntanos tu historia...
üìç ¬øC√≥mo naci√≥ tu negocio?
üç∞ ¬øQu√© te inspira cada d√≠a?"
                     maxlength="500" class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900"></textarea>
            <p-message *ngIf="landingForm.get('history')?.invalid && landingForm.get('history')?.touched" severity="error" variant="text" size="small">La historia es requerida</p-message>
          </div>
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="vision">Visi√≥n</label>
            <textarea pTextarea id="vision" formControlName="vision" rows="4"
            placeholder="üëÄ Cu√©ntanos tu visi√≥n...
‚ú® ¬øC√≥mo quieres impactar a tus clientes, tu comunidad o el mundo?"
            maxlength="500" class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900"></textarea>
            <p-message *ngIf="landingForm.get('vision')?.invalid && landingForm.get('vision')?.touched" severity="error" variant="text" size="small">La visi√≥n es requerida</p-message>
          </div>
        </div>

        <!-- Paso 3: Informaci√≥n de Contacto -->
        <div *ngSwitchCase="3" class="flex flex-col gap-4">
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="address">Direcci√≥n</label>
            <textarea pTextarea id="address" formControlName="address" rows="2" placeholder="Direcci√≥n" class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900"></textarea>
            <p-message *ngIf="landingForm.get('address')?.invalid && landingForm.get('address')?.touched" severity="error" variant="text" size="small">La direcci√≥n es requerida</p-message>
          </div>
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="phone">Tel√©fono</label>
            <input pInputText id="phone" formControlName="phone" placeholder="Tel√©fono" class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900" />
            <p-message *ngIf="landingForm.get('phone')?.invalid && landingForm.get('phone')?.touched" severity="error" variant="text" size="small">El tel√©fono es requerido</p-message>
          </div>
          <div class="flex flex-col gap-2 mb-2">
            <label class="font-semibold text-gray-800" for="email">Email</label>
            <input pInputText id="email" formControlName="email" placeholder="Email" class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900" />
            <p-message *ngIf="landingForm.get('email')?.invalid && landingForm.get('email')?.touched" severity="error" variant="text" size="small">Email inv√°lido o requerido</p-message>
          </div>
          <div class="flex flex-col gap-2">
            <label class="font-semibold text-gray-800" for="schedule">Horarios</label>
            <textarea pTextarea id="schedule" formControlName="schedule" rows="4" maxlength="250"
            placeholder="üïê Indica tus horarios de atenci√≥n
Ejemplo:
Lunes a Viernes de 8:00 a 20:00 Hrs.
S√°bados y Domingos de 9:00 a 18:00 Hrs."
            class="rounded border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900"></textarea>
          </div>
        </div>

        <!-- Paso 4: Redes Sociales -->
        <div *ngSwitchCase="4" class="flex flex-col gap-4">
          <div class="flex flex-col gap-2" *ngFor="let social of socialPlatforms">
            <label class="font-semibold text-gray-800" [for]="social.control">{{social.name}}   </label>
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon bg-gray-100 rounded-l mr-4"><i [class]="social.icon"></i></span>
              <input pInputText [id]="social.control" [formControlName]="social.control" placeholder="{{social.name}}" class="rounded-r border border-gray-300 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition text-gray-900" />
            </div>
          </div>
        </div>

        <!-- Paso 5: Vista Previa -->
        <div *ngSwitchCase="5" class="flex flex-col gap-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <p-card header="Datos Generales" class="rounded-xl">
              <ng-container *ngIf="getLogoPreview()">
                <div class="flex items-center gap-2">
                  <b>Logo:</b>
                  <img [src]="getLogoPreview()" alt="Logo" class="preview-logo rounded border border-gray-200 ml-4" style="width:100px; height:32px; object-fit:contain;" />
                </div>
              </ng-container>
              <div class="text-gray-800"><b>Nombre:</b> {{landingForm.value.businessName}}</div>
              <div class="text-gray-800"><b>Eslogan:</b> {{landingForm.value.slogan}}</div>
            </p-card>
            <p-card header="Historia y Filosof√≠a" class="rounded-xl">
              <div class="text-gray-800"><b>Historia:</b> <span [innerHTML]="landingForm.value.history"></span></div>
              <div class="text-gray-800"><b>Visi√≥n:</b> <span [innerHTML]="landingForm.value.vision"></span></div>
            </p-card>
            <p-card header="Contacto" class="rounded-xl">
              <div class="text-gray-800"><b>Direcci√≥n:</b> {{landingForm.value.address}}</div>
              <div class="text-gray-800"><b>Tel√©fono:</b> {{landingForm.value.phone}}</div>
              <div class="text-gray-800"><b>Email:</b> {{landingForm.value.email}}</div>
              <div class="text-gray-800"><b>Horarios:</b> {{landingForm.value.schedule}}</div>
            </p-card>
            <p-card header="Redes Sociales" class="rounded-xl">
              <div *ngFor="let social of socialPlatforms" class="text-gray-800">
                <b>{{social.name}}:</b> {{landingForm.value[social.control]}}
              </div>
            </p-card>
          </div>
          <div class="flex flex-row gap-4 justify-end">
            <button pButton type="button" label="Volver a editar" class="p-button-secondary rounded" (click)="edit()"></button>
            <button pButton type="button" label="Guardar cambios" class="p-button-success rounded" (click)="save()"></button>
          </div>
        </div>
      </ng-container>

      <div class="flex flex-row gap-4 justify-end" *ngIf="step < 5">
        <button pButton type="button" label="Anterior" class="p-button-secondary rounded" (click)="prevStep()" [disabled]="step === 1"></button>
        <button pButton type="button" label="Siguiente" class="p-button-primary rounded" (click)="nextStep()"></button>
      </div>
      </form>
    </div>
  </div>
</div>
